<!DOCTYPE html>
<html>

<head>
  <title>Search Logic Test</title>
  <style>
    body {
      font-family: monospace;
      padding: 20px;
    }

    .test {
      margin: 10px 0;
      padding: 10px;
      border: 1px solid #ccc;
    }

    .pass {
      background: #e6f7e6;
    }

    .fail {
      background: #ffe6e6;
    }
  </style>
</head>

<body>
  <h1>üß™ Search Logic Test</h1>
  <div id="results"></div>

  <script>
    function runTests() {
      const results = document.getElementById('results');
      results.innerHTML = '';

      const mockMessages = [
        { id: 1, content: 'Hello world', created_at: '2023-01-01' },
        { id: 2, content: 'Hi there!', created_at: '2023-01-02' },
        { id: 3, content: 'high priority', created_at: '2023-01-03' },
        { id: 4, content: 'How are you?', created_at: '2023-01-04' },
        { id: 5, content: '', created_at: '2023-01-05' },
        { id: 6, content: null, created_at: '2023-01-06' }
      ];

      const query = 'Hi';

      const validMessages = mockMessages.filter(msg =>
        msg &&
        msg.content &&
        typeof msg.content === 'string' &&
        msg.id &&
        msg.created_at
      );

      const searchResults = validMessages.filter(msg =>
        msg.content.toLowerCase().includes(query.toLowerCase())
      );

      addResult('Test 1: Basic Search Logic',
        `Input: ${mockMessages.length} messages, Query: "${query}"`,
        `Valid: ${validMessages.length}, Matches: ${searchResults.length}`,
        searchResults.length === 2);

      console.log('Mock messages:', mockMessages);
      console.log('Valid messages:', validMessages);
      console.log('Search results:', searchResults);
    }

    function addResult(testName, input, output, passed) {
      const div = document.createElement('div');
      div.className = `test ${passed ? 'pass' : 'fail'}`;
      div.innerHTML = `
                <strong>${passed ? '‚úÖ' : '‚ùå'} ${testName}</strong><br>
                ${input}<br>
                ${output}
            `;
      document.getElementById('results').appendChild(div);
    }

    runTests();
  </script>
</body>

</html>