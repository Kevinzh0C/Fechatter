<!DOCTYPE html>
<html>
<head>
    <title>Test Route Redirect</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .step { margin: 10px 0; padding: 10px; background: #f0f0f0; border-radius: 5px; }
        button { padding: 10px 20px; margin: 5px; cursor: pointer; }
        .result { margin: 10px 0; padding: 10px; background: #e8f5e8; border-radius: 5px; }
    </style>
</head>
<body>
    <h1>Test Route Redirect</h1>
    
    <div class="step">
        <h3>Step 1: Clear Storage</h3>
        <button onclick="clearStorage()">Clear All Storage</button>
        <div id="storage-result"></div>
    </div>
    
    <div class="step">
        <h3>Step 2: Test Redirect</h3>
        <button onclick="testRedirect()">Go to Home (should redirect to login)</button>
        <button onclick="goToLogin()">Go to Login Directly</button>
    </div>
    
    <div class="step">
        <h3>Current State:</h3>
        <div id="current-state"></div>
    </div>
    
    <script>
        function updateState() {
            const token = localStorage.getItem('token');
            const refreshToken = localStorage.getItem('refreshToken');
            const state = {
                url: window.location.href,
                token: token || 'None',
                refreshToken: refreshToken || 'None',
                timestamp: new Date().toLocaleTimeString()
            };
            document.getElementById('current-state').innerHTML = `
                <strong>URL:</strong> ${state.url}<br>
                <strong>Token:</strong> ${state.token}<br>
                <strong>Refresh Token:</strong> ${state.refreshToken}<br>
                <strong>Updated:</strong> ${state.timestamp}
            `;
        }
        
        function clearStorage() {
            localStorage.clear();
            sessionStorage.clear();
            document.getElementById('storage-result').innerHTML = 
                '<div class="result">âœ… Storage cleared successfully!</div>';
            updateState();
        }
        
        function testRedirect() {
            window.location.href = '/';
        }
        
        function goToLogin() {
            window.location.href = '/login';
        }
        
        // Update state on load and every 2 seconds
        updateState();
        setInterval(updateState, 2000);
    </script>
</body>
</html> 